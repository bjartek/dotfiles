#!/bin/bash

oc project $1 || exit "Could not change to project $1"
 
oc project | grep "skatteetaten.io" &> /dev/null && exit 0

# this will only work on current cluster setup
contextNameOcp3=$(oc project | sed -E "s/.*\/([a-z-]+)-master.*/\\1/")/$1
contextNameOcp4=$(oc project | sed -E "s/.*api\.([0-9a-z-]+)\.paas.*/\\1/")/$1

oc project | grep "master" &> /dev/null && contextName=$contextNameOcp3 || contextName=$contextNameOcp4


oc config delete-context $contextName &> /dev/null
oc config rename-context $(oc config current-context) $contextName &> /dev/null
