#!/usr/bin/env bash

lockDir=/tmp
lockFile=oc_status

lockPath=${lockDir}/${lockFile}

find $lockDir -type f -name $lockFile -mmin +1 

find $lockDir -maxdepth 1 -type f -name $lockFile -mmin +1 | while IFS= read -r file; do
    cat $lockPath
    exit
done


oc project >& /dev/null || exit
 project=$(oc project | awk -F\" '{print $2}')
cluster=$(oc project | awk -F\" '{print $4}' | sed -e "s|https://\(.*\)-master.paas.skead.no:8443|\1|" | sed -e "s|https://uil0map-\(.*\).skead.no:8443|\1|" | sed -e "s|https://uil0paas-\(.*\)-master01.skead.no:8443|\1|")
echo -e " $cluster  $project " > $lockPath

cat $lockPath
